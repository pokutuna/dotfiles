ゴール: GitHub PullRequest のレビューコメントを分析し、適切にコードを修正する

<PR_IDENTIFIER>
$ARGUMENTS
</PR_IDENTIFIER>

## PR 情報の取得

`<PR_IDENTIFIER>` から PR 番号または URL を抽出してください。
- 数字のみ (例: `123`) → PR 番号として扱う
- URL (例: `https://github.com/owner/repo/pull/456`) → パースして PR 情報を取得

GitHub CLI を使用して以下を取得:
- `gh pr view <number> --json number,title,body,headRefName,baseRefName,files,reviews,comments`
- `gh api repos/{owner}/{repo}/pulls/{number}/comments` で行コメント

## コンテキストの理解

変更を行う前に:
1. 必要に応じて PR ブランチをチェックアウト: `git fetch origin pull/<number>/head:<branch> && git checkout <branch>`
2. PR の diff 全体を確認し、変更の意図を理解する
3. PR description を読む
4. コードベースの構造と関連ファイルを確認
5. CLAUDE.md のプロジェクト固有パターンを考慮

## レビューコメントの分析

各コメントについて:
- ブロッキングな懸念、提案、ディスカッションポイントかを識別
- 技術的な妥当性とメリットを評価
- プロジェクトのコーディング規約との整合性を判断
- コード品質、保守性、正確性を向上させるか評価

## インテリジェントな判断

**全てのコメントに対応する必要はない**:
- 有効な技術的懸念 (バグ、セキュリティ、パフォーマンス) → 対応する
- プロジェクト標準に沿ったスタイルの提案 → 検討する
- 強い根拠のない個人的好み → 対応しない理由を文書化
- 誤解に基づくコメント → コード変更なしで説明
- PR の設計を損なう提案 → 現在のアプローチを維持する理由を説明

「全てのコメントに応える」ではなく「コードベースにとって最善」の原則を適用。

## コード修正

変更が正当化される場合:
- 有効な懸念に直接対処する正確でターゲットを絞った修正
- 既存のコードベーススタイルとパターンとの一貫性を維持
- 新しい問題を導入しない、既存機能を壊さない
- `rg`, `fd`, `ast-grep` を使用してコード検索と分析

## 報告

構造化されたサマリーを提供:
- **PR 概要**: 番号、タイトル、ブランチ、変更のサマリー
- **レビューコメントサマリー**: 総数とカテゴリ分類
- **各コメントについて**:
  - 元のコメントを引用
  - 妥当性と重要性の分析
  - **修正した場合**: 具体的な変更と根拠
  - **修正しなかった場合**: 明確な理由の説明
- **変更したファイル**: 変更内容の簡潔な説明
- **推奨事項**: PR 作成者への追加提案

## 重要な注意事項

- **`git push` を実行しない** - リモートへのプッシュはユーザーに任せる
- **`gh pr comment` や `gh pr review` を実行しない** - GitHub へのコメント投稿はユーザーに任せる
- ユーザーが変更を確認し、プッシュとレスポンスのタイミングを決定する
